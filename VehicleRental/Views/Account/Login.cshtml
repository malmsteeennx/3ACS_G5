@{
    ViewData["Title"] = "Login";
}
<link rel="stylesheet" href="~/css/logsign.css" asp-append-version="true">

<!-- ✅ Login Loader (Initially Hidden) -->
<div id="loginLoader" class="login-loader" style="display: none;">
    <div class="spinner"></div>
    <p>Logging in...</p>
</div>

<div class="auth-container">
    <div class="auth-card">
        <h2 class="text-center mb-3">Login</h2>
        <p class="text-center text-muted">Enter your credentials to access your account.</p>

        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success">@TempData["SuccessMessage"]</div>
        }

        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
        }

        <form method="post" asp-action="Login" id="loginForm">
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="password" name="password" required>
                    <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('password')">
                        <i class="bi bi-eye"></i>
                    </button>
                </div>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg" id="loginButton">Login</button>
            </div>
        </form>

        <p class="text-center mt-3">
            Don't have an account? <a asp-controller="Account" asp-action="Signup" class="text-decoration-none">Sign up here</a>.
        </p>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const loginForm = document.getElementById("loginForm");
            const loginLoader = document.getElementById("loginLoader");
            const loginButton = document.getElementById("loginButton");

            loginForm.addEventListener("submit", function (event) {
                // ✅ Show loader only when Login is clicked
                loginLoader.style.display = "flex";
                loginButton.disabled = true; // Prevent multiple clicks
            });
        });
    </script>
}
